"use strict";$(document).ready(function(){new Clipboard(".btn");(function(e,a,n,t){function i(e){if("file"==e.type){var a=e.value;if(a.length>0){for(var n=!1,t=0;t<f.length;t++){var i=f[t];if(a.substr(a.length-i.length,i.length).toLowerCase()==i.toLowerCase()){n=!0;break}}if(!n)return e.value="",!1}}return!0}var o=e("form"),r=o.find('input[type="file"]'),d=o.find("label"),s=e("body"),l=!1,p=e(".image-details ul"),c=(e("#usage"),e("#vertical-example"),e("#horizontal-example"),e("#get-code")),m=new FileReader,u=new Image,g=function(){var e=n.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in a&&"FileReader"in a}(),h=function(e){var a="max-files"===e?"1 File at a time please":"not-supported-file"===e?"Not Supported file type":"Vertical / Horizontal Image Sprite only";o.addClass("error"),d.text(a),setTimeout(function(){o.removeClass("error"),d.html('<span class="box-dragndrop">Drag Sprite Image Here or</span> <strong>Browse</strong>')},2500)},f=[".jpg",".jpeg",".bmp",".gif",".png"],v=function(a){m.onload=function(){u.onload=function(){var t=u.height>u.width?"Vertical":u.height===u.width?"Square":"Horizontal",r=a[0].name.length>20?a[0].name.substring(0,13):a[0].name,d=r.substring(0,r.length-4),l=a[0].name.substr(a[0].name.length-4,4),m=u.outerHTML;return a.length>1?(h("max-files"),!1):u.height===u.width?(h("not-supported-sprite"),!1):i(u)?(e("#preview").removeAttr("style"),e("#get-code button").text("Generate SCSS Code").fadeIn(),p.html(""),p.append(e('<li><label for="name">Animation Name</label><input type="text" id="name" value="'+d+'" pattern="[a-zA-Z0-9]" maxlength="13"></li>')),p.append(e('<li><label for="sprite-direction">Sprite Direction</label>'+t+"</li>")),p.append(e('<li><label for="sprite-width">Sprite Width</label>'+u.width+"px</li>")),p.append(e('<li><label for="sprite-height">Sprite Height</label>'+u.height+"px</li>")),p.append(e('<li><label for="animation-frames">Animation Frames</label><input type="number" id="animation-frames" value="4" min="2" max="50" step="1" pattern="[-+]?[0-9]*[.]?[0-9]+"></li>')),p.append(e('<li><label for="animation-duration">Animation Duration</label><input type="number" id="animation-duration" value="0.6" min="0.1" max="30" step="0.1" pattern="[-+]?[0-9]*[.]?[0-9]+"></li>')),p.append(e('<li><label for="animation-iteration">Animation Iteration</label><span data-tootik="0 is Infinity" data-tootik-conf="right warning"><input type="number" value="0" min="0" max="100" step="1" id="animation-iteration" checked="checked"></span></li>')),p.append(e('<li><input type="checkbox" id="animation-reverse"><label for="animation-reverse">Animation Reverse</label></li>')),o.find(".previewImage").remove(),o.append(e('<div class="previewImage">'+m+"</div>")),s.hasClass("get-code")&&s.hasClass("generate-code")?s.removeClass("generate-code"):s.hasClass("get-code")||s.hasClass("generate-code")||s.addClass("get-code"),void c.on("click",function(){var a=e("#code"),i=e(this),o=e("#name"),r=e("#canves"),d=e("#animation-iteration"),p=e("#animation-duration"),m=e("#animation-reverse"),g=e("#animation-frames"),h=e("#preview"),f=a.find("span[data-code]"),v=o.val(),b=g.val(),w=p.val(),C=d.val(),x=v+l,y=u.height>u.width,k=u.width+"px",S=u.height+"px",I=m.is(":checked"),A=[v,x,y,k,S,b,w,C,I];h.remove(),r.append(e('<div id="preview"></div>')),h=e("#preview"),i.find("button").fadeOut(function(){i.find("button").text("Regenerate SCSS Code")});var D=(function(){e.each(f,function(a,n){var t=e(this);t.text(A[a])})}(),"0"===d.val()?"infinite":d.val()),T=e(".previewImage img").attr("src"),F=m.is(":checked")?"reverse":"normal";s.addClass("generate-code");var H=void 0,R=n.head||n.getElementsByTagName("head")[0],z=n.createElement("style");h.css("background-image",'url("'+T+'")'),"Vertical"===t?(H="@keyframes demo { to { background-position: 0 -"+u.height+"px; } }",h.css("width",u.width+"px"),h.css("height",u.height/g.val())):(H="@keyframes demo { to { background-position: -"+u.width+"px 0; } }",h.css("width",u.width/g.val()+"px"),h.css("height",u.height)),h.css("animation","demo "+p.val()+"s steps("+g.val()+") "+D+" "+F),z.type="text/css",z.styleSheet?z.styleSheet.cssText=H:z.appendChild(n.createTextNode(H)),R.appendChild(z),e("#name, #animation-frames, #animation-duration, #animation-iteration").on("keyup",function(e){s.hasClass("generate-code")&&13==e.which&&c.click()}),e("#animation-frames, #animation-duration, #animation-iteration").on("change",function(e){s.hasClass("generate-code")&&c.find("button").fadeIn()}).on("keydown",function(e){s.hasClass("generate-code")&&c.find("button").fadeIn()}),o.on("keydown",function(e){s.hasClass("generate-code")&&c.find("button").fadeIn()}),m.on("change",function(){s.hasClass("generate-code")&&c.find("button").fadeIn()})})):(h("not-supported-file"),!1)},u.src=m.result},m.readAsDataURL(a[0])};r.on("change",function(e){v(e.target.files)}),g&&o.addClass("has-advanced-upload").on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){o.addClass("is-dragover")}).on("dragleave dragend drop",function(){o.removeClass("is-dragover")}).on("drop",function(e){l=e.originalEvent.dataTransfer.files,v(l)}),r.on("focus",function(){r.addClass("has-focus")}).on("blur",function(){r.removeClass("has-focus")})})(jQuery,window,document)});